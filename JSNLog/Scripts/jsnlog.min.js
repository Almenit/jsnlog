function JL(n){if(!n)return JL.__;var t="";return("."+n).split(".").reduce(function(n,i){t?t+="."+i:t=i;var r=n["__"+t];return r===undefined&&(JL.Logger.prototype=n,r=new JL.Logger(t),n["__"+t]=r),r},JL.__)}var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},JL;(function(n){function t(n,t,i){if(t[n]!==undefined){if(t[n]===null){delete i[n];return}i[n]=t[n]}}function f(t){if(!(n.enabled==null)&&!n.enabled||!(n.maxMessages==null)&&n.maxMessages<1)return!1;try{if(t.userAgentRegex&&!new RegExp(t.userAgentRegex).test(navigator.userAgent))return!1}catch(i){}try{if(t.ipRegex&&n.clientIP&&!new RegExp(t.ipRegex).test(n.clientIP))return!1}catch(i){}return!0}function e(n,t){try{if(n.disallow&&new RegExp(n.disallow).test(t))return!1}catch(i){}return!0}function p(n){return t("enabled",n,this),t("maxMessages",n,this),t("clientIP",n,this),t("requestId",n,this),this}function w(){return-2147483648}function o(){return 1e3}function s(){return 2e3}function h(){return 3e3}function c(){return 4e3}function l(){return 5e3}function a(){return 6e3}function b(){return 2147483647}function k(n){return new i(n)}var r,u,i,v,y;n.enabled,n.maxMessages,n.clientIP,n.requestId,n.setOptions=p,n.getAllLevel=w,n.getTraceLevel=o,n.getDebugLevel=s,n.getInfoLevel=h,n.getWarnLevel=c,n.getErrorLevel=l,n.getFatalLevel=a,n.getOffLevel=b,r=function(){function n(n,t,i,r){this.l=n,this.m=t,this.n=i,this.t=r}return n}(),n.LogItem=r,u=function(){function i(t,i){this.appenderName=t,this.sendLogItems=i,this.level=n.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.buffer=[],this.batchBuffer=[]}return i.prototype.setOptions=function(n){return t("level",n,this),t("ipRegex",n,this),t("userAgentRegex",n,this),t("disallow",n,this),t("sendWithBufferLevel",n,this),t("storeInBufferLevel",n,this),t("bufferSize",n,this),t("batchSize",n,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this},i.prototype.log=function(n,t,i){var u;if(f(this)&&e(this,t)&&!(n<this.storeInBufferLevel)){if(u=new r(n,t,i,(new Date).getTime()),n<this.level){this.bufferSize>0&&(this.buffer.push(u),this.buffer.length>this.bufferSize&&this.buffer.shift());return}if(n<this.sendWithBufferLevel?this.batchBuffer.push(u):(this.buffer.length&&(this.batchBuffer=this.batchBuffer.concat(this.buffer),this.buffer.length=0),this.batchBuffer.push(u)),this.batchBuffer.length>=this.batchSize){this.sendBatch();return}}},i.prototype.sendBatch=function(){this.batchBuffer.length!=0&&(n.maxMessages==null||(n.maxMessages-=this.batchBuffer.length),this.sendLogItems(this.batchBuffer),this.batchBuffer.length=0)},i}(),n.Appender=u,i=function(i){function r(n){i.call(this,n,r.prototype.sendLogItemsAjax),this.url="jsnlog.logger"}return __extends(r,i),r.prototype.setOptions=function(n){return t("url",n,this),i.prototype.setOptions.call(this,n),this},r.prototype.sendLogItemsAjax=function(t){try{var r=JSON.stringify({r:n.requestId,lg:t}),i=new XMLHttpRequest;i.open("POST",this.url),i.setRequestHeader("Content-Type","application/json"),i.send(r)}catch(u){}},r}(u),n.AjaxAppender=i,v=function(){function n(n){this.loggerName=n,this.seenRegexes=[]}return n.prototype.stringifyLogObject=function(n){switch(typeof n){case"string":return n;case"number":return n.toString();case"boolean":return n.toString();case"undefined":return"undefined";case"function":return n instanceof RegExp?n.toString():this.stringifyLogObject(n());case"object":return n instanceof RegExp||n instanceof String||n instanceof Number||n instanceof Boolean?n.toString():JSON.stringify(n);default:return"unknown"}},n.prototype.setOptions=function(n){return t("level",n,this),t("userAgentRegex",n,this),t("disallow",n,this),t("ipRegex",n,this),t("appenders",n,this),t("onceOnly",n,this),this.seenRegexes=[],this},n.prototype.log=function(n,t){var i=0,r;if(!this.appenders)return this;if(n>=this.level&&f(this)&&(r=this.stringifyLogObject(t),e(this,r))){if(this.onceOnly)for(i=this.onceOnly.length-1;i>=0;){if(new RegExp(this.onceOnly[i]).test(r)){if(this.seenRegexes[i])return this;this.seenRegexes[i]=!0}i--}for(i=this.appenders.length-1;i>=0;)this.appenders[i].log(n,r,this.loggerName),i--}return this},n.prototype.trace=function(n){return this.log(o(),n)},n.prototype.debug=function(n){return this.log(s(),n)},n.prototype.info=function(n){return this.log(h(),n)},n.prototype.warn=function(n){return this.log(c(),n)},n.prototype.error=function(n){return this.log(l(),n)},n.prototype.fatal=function(n){return this.log(a(),n)},n}(),n.Logger=v,y=new i(""),n.__=new n.Logger(""),n.__.setOptions({level:n.getDebugLevel(),appenders:[y]}),n.createAjaxAppender=k})(JL||(JL={}));
//@ sourceMappingURL=jsnlog.min.js.map